<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>前端基础之bind、call、apply - Thetiso&#039;s Tech Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Thetiso&#039;s Tech Blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Thetiso&#039;s Tech Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="在上一篇文章简单介绍bind&amp;#x2F;call&amp;#x2F;apply之后，详细介绍下这三位js重量级选手"><meta property="og:type" content="blog"><meta property="og:title" content="前端基础之bind、call、apply"><meta property="og:url" content="http://thetiso.github.io/2021/02/19/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E4%B9%8Bbind-call-apply/"><meta property="og:site_name" content="Thetiso&#039;s Tech Blog"><meta property="og:description" content="在上一篇文章简单介绍bind&amp;#x2F;call&amp;#x2F;apply之后，详细介绍下这三位js重量级选手"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://thetiso.github.io/img/og_image.png"><meta property="article:published_time" content="2021-02-19T09:02:36.000Z"><meta property="article:modified_time" content="2021-02-19T09:21:10.613Z"><meta property="article:author" content="Thetiso"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://thetiso.github.io/2021/02/19/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E4%B9%8Bbind-call-apply/"},"headline":"Thetiso's Tech Blog","image":["http://thetiso.github.io/img/og_image.png"],"datePublished":"2021-02-19T09:02:36.000Z","dateModified":"2021-02-19T09:21:10.613Z","author":{"@type":"Person","name":"Thetiso"},"description":"在上一篇文章简单介绍bind&#x2F;call&#x2F;apply之后，详细介绍下这三位js重量级选手"}</script><link rel="canonical" href="http://thetiso.github.io/2021/02/19/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E4%B9%8Bbind-call-apply/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.3.0"></head><body class="is-1-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Thetiso&#039;s Tech Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About Me</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-12"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-02-19T09:02:36.000Z" title="2021/2/19 下午5:02:36">2021-02-19</time>发表</span><span class="level-item"><time dateTime="2021-02-19T09:21:10.613Z" title="2021/2/19 下午5:21:10">2021-02-19</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/">前端基础</a></span><span class="level-item">9 分钟读完 (大约1307个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">前端基础之bind、call、apply</h1><div class="content"><p>在上一篇文章简单介绍bind/call/apply之后，详细介绍下这三位js重量级选手</p>
<a id="more"></a>

<div class="toc">

<!-- toc -->

<ul>
<li><a href="#jia-shen-li-jie">加深理解</a><ul>
<li><a href="#call-apply">call、apply</a></li>
<li><a href="#apply-call-qu-bie">apply - call 区别</a></li>
<li><a href="#shi-yong-shi-li">使用示例</a></li>
<li><a href="#mian-shi-shi-li">面试实例</a></li>
<li><a href="#bind">bind</a><ul>
<li><a href="#shi-yong-shi-li-1-yu-ding-yi-can-shu">使用实例1：预定义参数</a></li>
<li><a href="#shi-yong-shi-li-2-yu-settimeout-setinterval-yi-qi-shi-yong">使用实例2： 与setTimeout/setinterval一起使用</a></li>
<li><a href="#shi-yong-shi-li-3-zuo-wei-gou-zao-han-shu">使用实例3：作为构造函数</a></li>
<li><a href="#shi-yong-shi-li-4-jie-jing">使用实例4： 捷径</a></li>
</ul>
</li>
<li><a href="#zi-ji-lai-gou-zao-bind-fang-fa-bind-bing-bu-shi-zai-suo-you-liu-lan-qi-zhong-du-zhi-chi-di-ban-ben-liu-lan-qi-bu-zhi-chi">自己来构造bind方法：bind并不是在所有浏览器中都支持(低版本浏览器不支持)</a><ul>
<li><a href="#mark-duo-ci-bind-wu-xiao-zhi-you-di-yi-ci-bind-shi-sheng-xiao-de">mark: 多次bind无效，只有第一次bind是生效的</a></li>
</ul>
</li>
<li><a href="#call-apply-bind">call/apply/bind</a></li>
</ul>
</li>
<li><a href="#chong-xie-bind-call-apply-new">重写bind、call、apply、new</a></li>
</ul>
<!-- tocstop -->

</div>

<h1><span id="jia-shen-li-jie">加深理解</span><a href="#jia-shen-li-jie" class="header-anchor">#</a></h1><ul>
<li>apply/call/bind是Function自带的方法</li>
<li>改变Function中的this指向 -&gt; 移花接木</li>
</ul>
<h2><span id="call-apply">call、apply</span><a href="#call-apply" class="header-anchor">#</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fruits</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;this from spell:&#x27;</span>, <span class="built_in">this</span>) <span class="comment">// fruits</span></span><br><span class="line">&#125;</span><br><span class="line">fruits.prototype = &#123;</span><br><span class="line">    color: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">    say: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;this from say:&#x27;</span>, <span class="built_in">this</span>)  <span class="comment">//指向fruits</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;my color is &#x27;</span> + <span class="built_in">this</span>.color)</span><br><span class="line">    &#125;,</span><br><span class="line">    tell: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;this from tell:&#x27;</span>, <span class="built_in">this</span>) <span class="comment">// 指向Windows</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> apple = <span class="keyword">new</span> fruits <span class="comment">//立即执行 function内的代码</span></span><br><span class="line">apple.say()</span><br><span class="line">apple.tell()</span><br><span class="line"></span><br><span class="line"><span class="comment">//console.log</span></span><br><span class="line"><span class="comment">//this from spell: fruits &#123;&#125;</span></span><br><span class="line"><span class="comment">//this from say: fruits &#123;&#125;</span></span><br><span class="line"><span class="comment">//my color is red</span></span><br><span class="line"><span class="comment">//this from tell: Window &#123;postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, frames: Window, …&#125;</span></span><br></pre></td></tr></table></figure>
<p>此时如果我们构建一个banana = {color:’yellow’}对象，但是不想反复创建say方法，就可以直接使用apply/call来借用apply的方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> banana = &#123;</span><br><span class="line">    color: <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">apple.say.call(banana)</span><br><span class="line">apple.say.apply(banana)</span><br><span class="line"></span><br><span class="line"><span class="comment">//console.log</span></span><br><span class="line"><span class="comment">// this from say: &#123;color: &quot;yellow&quot;&#125; color: &quot;yellow&quot;__proto__: Object</span></span><br><span class="line"><span class="comment">// my color is yellow</span></span><br><span class="line"><span class="comment">// this from say: &#123;color: &quot;yellow&quot;&#125; color: &quot;yellow&quot;__proto__: Object</span></span><br><span class="line"><span class="comment">// my color is yellow</span></span><br></pre></td></tr></table></figure>
<p>此时say方法内的this指向了banana对象</p>
<h2><span id="apply-call-qu-bie">apply - call 区别</span><a href="#apply-call-qu-bie" class="header-anchor">#</a></h2><p>入参方式不同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let func &#x3D; function(arg1, arg2) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func.call(this, arg1, arg2)</span><br><span class="line">func.apply(this, [arg1, arg2])</span><br></pre></td></tr></table></figure>
<h2><span id="shi-yong-shi-li">使用示例</span><a href="#shi-yong-shi-li" class="header-anchor">#</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array1 = [<span class="number">12</span>, <span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;-123&#x27;</span>, &#123;<span class="attr">name</span>: <span class="string">&#x27;Joe&#x27;</span>&#125;]</span><br><span class="line"><span class="keyword">let</span> array2 = [<span class="string">&#x27;Deo&#x27;</span>, <span class="string">&#x27;555&#x27;</span>, <span class="number">100</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(array1, array2)</span><br><span class="line"><span class="built_in">console</span>.log(array1)</span><br><span class="line"></span><br><span class="line"><span class="comment">//console</span></span><br><span class="line">(<span class="number">7</span>) [<span class="number">12</span>, <span class="string">&quot;foo&quot;</span>, <span class="string">&quot;-123&quot;</span>, &#123;…&#125;, <span class="string">&quot;Deo&quot;</span>, <span class="string">&quot;555&quot;</span>, <span class="number">100</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">2</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">let</span> maxInNumers = <span class="built_in">Math</span>.max.apply(<span class="built_in">Math</span>, numbers)</span><br><span class="line"><span class="keyword">let</span> minInNumbers = <span class="built_in">Math</span>.min.call(<span class="built_in">Math</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line"><span class="built_in">console</span>.log(maxInNumers)  <span class="comment">// 12</span></span><br><span class="line"><span class="built_in">console</span>.log(minInNumbers) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 验证是否是数组(toString未被修改)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">&#x27;[object Array]&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="mian-shi-shi-li">面试实例</span><a href="#mian-shi-shi-li" class="header-anchor">#</a></h2><p>题1： 定义一个log方法，代理console.log方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(args)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log.apply(<span class="built_in">console</span>, <span class="built_in">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>)</span><br><span class="line">    args.unshift(<span class="string">&#x27;(app) &#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log.apply(<span class="built_in">console</span>, args)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">log1(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">log2(<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;wncwejcnk&#x27;</span>, &#123;<span class="attr">abc</span>: <span class="string">&#x27;test&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//console</span></span><br><span class="line">(<span class="number">2</span>) [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">(app)  <span class="number">1</span> wncwejcnk &#123;<span class="attr">abc</span>: <span class="string">&quot;test&quot;</span>&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="bind">bind</span><a href="#bind" class="header-anchor">#</a></h2><p>错误实例1：将方法从一个对象中拿出来赋值，并且希望this指向原来的对象，一般不做特殊处理都会丢失原来的对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let altwrite &#x3D; document.write</span><br><span class="line">altwrite(&#39;hello&#39;)  &#x2F;&#x2F; Uncaught TypeError: Illegal invocation</span><br><span class="line">&#x2F;&#x2F;altwrite改变this的指向global或者window,导致非法调用</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;正确姿势</span><br><span class="line">altwrite.bind(document)(&#39;hello&#39;)  &#x2F;&#x2F; hello</span><br><span class="line">altwrite.call(document, &#39;hello&#39;)  &#x2F;&#x2F; hello</span><br></pre></td></tr></table></figure>
<ul>
<li>bind用于创建一个函数，使这个函数无论怎么调用都有相同的this值</li>
<li>当使用bind绑定函数时，以创建时传入bind的第一个参数作为this，传入bind方法的第二个以及以后的参数加上绑定函数运行时本身的参数韩兆顺序作为原函数的参数来调用函数</li>
</ul>
<p>示例1：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = &#123;</span><br><span class="line">    bar: <span class="number">1</span>,</span><br><span class="line">    eventBind: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> _this = <span class="built_in">this</span></span><br><span class="line">        $(<span class="string">&#x27;.someClass&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>)    <span class="comment">//&lt;h1 class=&quot;someClass&quot;&gt;abc&lt;/h1&gt;</span></span><br><span class="line">            <span class="built_in">console</span>.log(_this)   <span class="comment">//&#123;bar: 1, eventBind: ƒ&#125;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo.eventBind()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> foo1 = &#123;</span><br><span class="line">    bar: <span class="number">2</span>,</span><br><span class="line">    eventBind: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">&#x27;.someClass&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>)  <span class="comment">//&#123;bar: 2, eventBind: ƒ&#125;</span></span><br><span class="line">        &#125;.bind(<span class="built_in">this</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo1.eventBind()</span><br></pre></td></tr></table></figure>
<p>示例2：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bar2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar2() <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> barObject = &#123;</span><br><span class="line">    x: <span class="string">&#x27;this is from barObject&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> barFunc = bar2.bind(barObject)  <span class="comment">//不会立即执行</span></span><br><span class="line">barFunc()  <span class="comment">//this is from barObject</span></span><br></pre></td></tr></table></figure>
<h4><span id="shi-yong-shi-li-1-yu-ding-yi-can-shu">使用实例1：预定义参数</span><a href="#shi-yong-shi-li-1-yu-ding-yi-can-shu" class="header-anchor">#</a></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">list</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> list1 = list(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>) <span class="comment">// [1,2,3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> leading37List = list.bind(<span class="literal">undefined</span>, <span class="number">37</span>)</span><br><span class="line"><span class="keyword">let</span> list2 = leading37List(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)  <span class="comment">// [37, 1, 2 ,3]</span></span><br><span class="line"><span class="keyword">let</span> list3 = leading37List()   <span class="comment">// [37]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4><span id="shi-yong-shi-li-2-yu-settimeout-setinterval-yi-qi-shi-yong">使用实例2： 与setTimeout/setinterval一起使用</span><a href="#shi-yong-shi-li-2-yu-settimeout-setinterval-yi-qi-shi-yong" class="header-anchor">#</a></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bloomer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.petalCount = <span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.random() * <span class="number">12</span> + <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">Bloomer.prototype.bloom = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.setTimeout(<span class="built_in">this</span>.declare.bind(<span class="built_in">this</span>), <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Bloomer.prototype.declare = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;declare.this&#x27;</span>, <span class="built_in">this</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;i have &#x27;</span> + <span class="built_in">this</span>.petalCount + <span class="string">&#x27; petal&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bloo = <span class="keyword">new</span> Bloomer  <span class="comment">// 等同于  new Bloomer()</span></span><br><span class="line"></span><br><span class="line">bloo.bloom()  <span class="comment">//i have 3 petal</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myBloomer = &#123;</span><br><span class="line">    petalCount: <span class="number">12</span></span><br><span class="line">&#125;</span><br><span class="line">Bloomer.prototype.bloom2 = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.setTimeout(<span class="built_in">this</span>.declare.bind(obj), <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line">bloo.bloom2(myBloomer)   <span class="comment">//i have 12 petal</span></span><br><span class="line"></span><br><span class="line">bloo.bloom2().bind(myBloomer)  <span class="comment">// Uncaught TypeError: Cannot read property &#x27;bind&#x27; of undefined</span></span><br></pre></td></tr></table></figure>
<h4><span id="shi-yong-shi-li-3-zuo-wei-gou-zao-han-shu">使用实例3：作为构造函数</span><a href="#shi-yong-shi-li-3-zuo-wei-gou-zao-han-shu" class="header-anchor">#</a></h4><p>适用于使用new操作符来构造目标函数的实例：此时this会被忽略，但传入的参数仍然有效(第二个参数开始)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Point</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x;</span><br><span class="line">    <span class="built_in">this</span>.y = y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Point.prototype.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.x + <span class="string">&#x27;,&#x27;</span> + <span class="built_in">this</span>.y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">p.toString()  <span class="comment">// 1,2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> emptyObj = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> YAxisPoint = Point.bind(emptyObj, <span class="number">0</span>)  <span class="comment">//x=0</span></span><br><span class="line"><span class="keyword">let</span> YAxisPoint2 = Point.bind(<span class="literal">null</span>, <span class="number">0</span>)  <span class="comment">//不会报错，this被忽略</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> axisPoint = <span class="keyword">new</span> YAxisPoint(<span class="number">5</span>)</span><br><span class="line">axisPoint.toString()  <span class="comment">//0,5</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(axisPoint <span class="keyword">instanceof</span> Point)  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(axisPoint <span class="keyword">instanceof</span> YAxisPoint)  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Point(<span class="number">1</span>,<span class="number">3</span>) <span class="keyword">instanceof</span> YAxisPoint)  <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h4><span id="shi-yong-shi-li-4-jie-jing">使用实例4： 捷径</span><a href="#shi-yong-shi-li-4-jie-jing" class="header-anchor">#</a></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//改造前</span></span><br><span class="line"><span class="keyword">let</span> slice = <span class="built_in">Array</span>.prototype.slice</span><br><span class="line">slice.call(<span class="built_in">arguments</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//改造后</span></span><br><span class="line"><span class="keyword">let</span> unbounSlice = <span class="built_in">Array</span>.prototype.slice</span><br><span class="line"><span class="keyword">let</span> slice2 = <span class="built_in">Function</span>.prototype.call.bind(unboundSlice)</span><br><span class="line">slice2(<span class="built_in">arguments</span>)</span><br></pre></td></tr></table></figure>
<h2><span id="zi-ji-lai-gou-zao-bind-fang-fa-bind-bing-bu-shi-zai-suo-you-liu-lan-qi-zhong-du-zhi-chi-di-ban-ben-liu-lan-qi-bu-zhi-chi">自己来构造bind方法：bind并不是在所有浏览器中都支持(低版本浏览器不支持)</span><a href="#zi-ji-lai-gou-zao-bind-fang-fa-bind-bing-bu-shi-zai-suo-you-liu-lan-qi-zhong-du-zhi-chi-di-ban-ben-liu-lan-qi-bu-zhi-chi" class="header-anchor">#</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">oThis</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;Function.prototype.bind - what is trying to be bound is not callable&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> aArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>), </span><br><span class="line">        fToBind = <span class="built_in">this</span>, </span><br><span class="line">        fNOP = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">        fBound = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> fToBind.apply(</span><br><span class="line">                <span class="built_in">this</span> <span class="keyword">instanceof</span> fNOP &amp;&amp; oThis ? <span class="built_in">this</span> : oThis || <span class="built_in">window</span>,</span><br><span class="line">          aArgs.concat(<span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>))</span><br><span class="line">        );</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    fNOP.prototype = <span class="built_in">this</span>.prototype;</span><br><span class="line">    fBound.prototype = <span class="keyword">new</span> fNOP();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> fBound;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4><span id="mark-duo-ci-bind-wu-xiao-zhi-you-di-yi-ci-bind-shi-sheng-xiao-de">mark: 多次bind无效，只有第一次bind是生效的</span><a href="#mark-duo-ci-bind-wu-xiao-zhi-you-di-yi-ci-bind-shi-sheng-xiao-de" class="header-anchor">#</a></h4><p>bind() 的实现，相当于使用函数在内部包了一个 call / apply ，第二次 bind() 相当于再包住第一次 bind() ,故第二次以后的 bind 是无法生效的。</p>
<h2><span id="call-apply-bind">call/apply/bind</span><a href="#call-apply-bind" class="header-anchor">#</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    x: <span class="number">81</span>,</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> fooObj = &#123;</span><br><span class="line">    x: <span class="number">3</span>,</span><br><span class="line">    getX: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(fooObj.getX.bind(obj)());  <span class="comment">//81 , 多一个（）</span></span><br><span class="line"><span class="built_in">console</span>.log(fooObj.getX.call(obj));    <span class="comment">//81</span></span><br><span class="line"><span class="built_in">console</span>.log(fooObj.getX.apply(obj)); </span><br><span class="line"><span class="built_in">console</span>.log(fooObj.getX())  <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<ul>
<li>apply 、 call 、bind 三者都是用来改变函数的this对象的指向的；</li>
<li>apply 、 call 、bind 三者第一个参数都是this要指向的对象，也就是想指定的上下文；</li>
<li>apply 、 call 、bind 三者都可以利用后续参数传参；</li>
<li>bind 是返回对应函数，便于稍后调用；apply 、call 则是立即调用 。</li>
</ul>
<h1><span id="chong-xie-bind-call-apply-new">重写bind、call、apply、new</span><a href="#chong-xie-bind-call-apply-new" class="header-anchor">#</a></h1><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903848889286669">参考文档-掘金</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>前端基础之bind、call、apply</p><p><a href="http://thetiso.github.io/2021/02/19/前端基础之bind-call-apply/">http://thetiso.github.io/2021/02/19/前端基础之bind-call-apply/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Thetiso</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-02-19</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-02-19</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/02/19/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8BLRU%E5%AE%9E%E7%8E%B0/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">前端进阶之LRU实现</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/02/13/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E4%B9%8BJS%E5%9F%BA%E6%9C%AC/"><span class="level-item">前端基础之JS基本</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "03e3aea3e1a2197b77c994b2361e6e9f",
            repo: "blog-site-comments",
            owner: "thetiso",
            clientID: "6fc0041775b201d6de94",
            clientSecret: "6e7e41e3c9efa52eaa1712f435f3890d4325596b",
            admin: ["thetiso"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "zh-CN",
        })
        gitalk.render('comment-container')</script></div></div></div><!--!--><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Thetiso&#039;s Tech Blog" height="28"></a><p class="is-size-7"><span>&copy; 2021 Thetiso</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>